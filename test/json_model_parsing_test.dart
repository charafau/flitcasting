import 'package:built_collection/built_collection.dart';
import 'package:test/test.dart';
import 'package:flitcasting/serializers.dart';
import 'dart:convert';
import 'package:flitcasting/model/movie.dart';
import 'package:flitcasting/model/broadcaster.dart';
import 'package:flitcasting/model/accesstoken.dart';
import 'package:flitcasting/model/movie_response.dart';
import 'package:flitcasting/model/movie_response_list.dart';

void main() {

  test('should deserialize movie', () {
    final String _movieJson = """
   {"id":"387092623","user_id":"2543157289","title":"sometitle！！！","subtitle":"blabla！！！","last_owner_comment":null,"category":"cat","link":"http://ada.com","is_live":true,"is_recorded":false,"comment_count":0,"large_thumbnail":"http://sometdsa.com/asda.jpg","small_thumbnail":"http://sometdsa.com/asda.jpg","country":"jp","duration":8,"created":1500007675,"is_collabo":false,"is_protected":false,"max_view_count":0,"current_view_count":1,"total_view_count":1,"hls_url":"http://adad.com/metastream.m3u8/?video=1"}
  """;

    final movie = serializers.deserializeWith(
        Movie.serializer, JSON.decode(_movieJson));
    print(movie);
  });

  test('should deserialize broadcaster', () {
    final String json = """
    {"id":"2543157289","screen_id":"leeeaf_","name":"りぃふ","image":"http://202-234-23-158.moi.st/image3s/pbs.twimg.com/profile_images/876751099482447872/X5d_6Imz_normal.jpg","profile":"目指せアイドル配信者","level":27,"last_movie_id":"387092623","is_live":true,"created":1432392721}
    """;

    final broadcaser = serializers.deserializeWith(
        Broadcaster.serializer, JSON.decode(json));

    print(broadcaser);
  });

  test('should deserialize movie response', () {
    final String json = """
      {"movie":{"id":"387092623","user_id":"2543157289","title":"初見さまさま！！！","subtitle":"初見さまさま！！！","last_owner_comment":null,"category":"boys_healingvoice_jp","link":"http://twitcasting.tv/leeeaf_","is_live":true,"is_recorded":false,"comment_count":0,"large_thumbnail":"http://202-230-12-93.twitcasting.tv/image3/image.twitcasting.tv/image60_1/8f/90/1712908f-1.jpg","small_thumbnail":"http://202-230-12-92.twitcasting.tv/image3/image.twitcasting.tv/image60_1/8f/90/1712908f-1-s.jpg","country":"jp","duration":8,"created":1500007675,"is_collabo":false,"is_protected":false,"max_view_count":0,"current_view_count":1,"total_view_count":1,"hls_url":"http://twitcasting.tv/leeeaf_/metastream.m3u8/?video=1"},"broadcaster":{"id":"2543157289","screen_id":"leeeaf_","name":"りぃふ","image":"http://202-234-23-158.moi.st/image3s/pbs.twimg.com/profile_images/876751099482447872/X5d_6Imz_normal.jpg","profile":"目指せアイドル配信者","level":27,"last_movie_id":"387092623","is_live":true,"created":1432392721}}
    """;

    final movieResponse = serializers.deserializeWith(
        MovieResponse.serializer, JSON.decode(json));

    print(movieResponse);
  });

  test('should deserialize movie response list', () {
    final String json = r"""
    {"movies":[{"movie":{"id":"387092623","user_id":"2543157289","title":"初見さまさま！！！","subtitle":"初見さまさま！！！","last_owner_comment":null,"category":"boys_healingvoice_jp","link":"http://twitcasting.tv/leeeaf_","is_live":true,"is_recorded":false,"comment_count":0,"large_thumbnail":"http://202-230-12-93.twitcasting.tv/image3/image.twitcasting.tv/image60_1/8f/90/1712908f-1.jpg","small_thumbnail":"http://202-230-12-92.twitcasting.tv/image3/image.twitcasting.tv/image60_1/8f/90/1712908f-1-s.jpg","country":"jp","duration":8,"created":1500007675,"is_collabo":false,"is_protected":false,"max_view_count":0,"current_view_count":1,"total_view_count":1,"hls_url":"http://twitcasting.tv/leeeaf_/metastream.m3u8/?video=1"},"broadcaster":{"id":"2543157289","screen_id":"leeeaf_","name":"りぃふ","image":"http://202-234-23-158.moi.st/image3s/pbs.twimg.com/profile_images/876751099482447872/X5d_6Imz_normal.jpg","profile":"目指せアイドル配信者","level":27,"last_movie_id":"387092623","is_live":true,"created":1432392721},"tags":["レベル25+","ラジオ"]},{"movie":{"id":"387092620","user_id":"843173810941571072","title":"🍓初見さん大歓迎🍓","subtitle":"🍓初見さん大歓迎🍓","last_owner_comment":null,"category":"girls_all_jp","link":"http://twitcasting.tv/mame_5230_","is_live":true,"is_recorded":false,"comment_count":0,"large_thumbnail":"http://202-230-12-91.twitcasting.tv/image3/image.twitcasting.tv/image59_1/8c/90/1712908c-1.jpg","small_thumbnail":"http://202-230-12-91.twitcasting.tv/image3/image.twitcasting.tv/image59_1/8c/90/1712908c-1-s.jpg","country":"jp","duration":8,"created":1500007675,"is_collabo":true,"is_protected":false,"max_view_count":0,"current_view_count":0,"total_view_count":0,"hls_url":"http://twitcasting.tv/mame_5230_/metastream.m3u8/?video=1"},"broadcaster":{"id":"843173810941571072","screen_id":"mame_5230_","name":"🍓マメ 🍓","image":"http://202-234-44-54.moi.st/image3s/pbs.twimg.com/profile_images/873355214979452928/VYeuD1f1_normal.jpg","profile":"ｶﾌﾟﾘｺで出来ている人間です。どうか自発してくだｻｲ。150cmチビ 大好きな 弟 君 →「@tuki_noko525」♡ 妹ﾁｬﾝ→(@h1_rg_ura_4)♡","level":20,"last_movie_id":"387092620","is_live":true,"created":1495631968},"tags":["ラジオ"]},{"movie":{"id":"387092622","user_id":"870794422807547904","title":"Radio Live #387092622","subtitle":null,"last_owner_comment":"モイ！Androidからキャス配信中 -","category":null,"link":"http://twitcasting.tv/umi_d_217","is_live":true,"is_recorded":false,"comment_count":1,"large_thumbnail":"http://202-230-12-92.twitcasting.tv/image3/image.twitcasting.tv/image56_1/8e/90/1712908e-1.jpg","small_thumbnail":"http://202-230-12-93.twitcasting.tv/image3/image.twitcasting.tv/image56_1/8e/90/1712908e-1-s.jpg","country":"jp","duration":8,"created":1500007675,"is_collabo":false,"is_protected":false,"max_view_count":0,"current_view_count":0,"total_view_count":0,"hls_url":"http://twitcasting.tv/umi_d_217/metastream.m3u8/?video=1"},"broadcaster":{"id":"870794422807547904","screen_id":"umi_d_217","name":"うみ","image":"http://202-234-23-158.moi.st/image3s/pbs.twimg.com/profile_images/885050152909668352/CwjtCzj__normal.jpg","profile":"LG'B'T/遠距離\n#セクマイ#LGBT","level":1,"last_movie_id":"387092622","is_live":true,"created":1499521167},"tags":["はじめて","ラジオ"]},{"movie":{"id":"387092621","user_id":"864036951187275776","title":"いちごてゃん","subtitle":"お買い物終わった！","last_owner_comment":"初見さん大歓迎 誰でもコメしてください！","category":"girls_talk_jp","link":"http://twitcasting.tv/berry____ir","is_live":true,"is_recorded":false,"comment_count":1,"large_thumbnail":"http://202-230-12-93.twitcasting.tv/image3/image.twitcasting.tv/image56_1/8d/90/1712908d-1.jpg","small_thumbnail":"http://202-230-12-91.twitcasting.tv/image3/image.twitcasting.tv/image56_1/8d/90/1712908d-1-s.jpg","country":"jp","duration":8,"created":1500007675,"is_collabo":false,"is_protected":false,"max_view_count":0,"current_view_count":2,"total_view_count":2,"hls_url":"http://twitcasting.tv/berry____ir/metastream.m3u8/?video=1"},"broadcaster":{"id":"864036951187275776","screen_id":"berry____ir","name":"いちごてゃん","image":"http://202-234-23-159.moi.st/image3s/pbs.twimg.com/profile_images/871430230824460288/CvPWAQUU_normal.jpg","profile":"いちごてゃんです 女の子大好きマン 一応L寄りのB(最近あやふや) ﾌｪﾑﾘﾊﾞ(少しネコ寄り) Twitter家族が沢山 あみゅ【#犬苺組】いちごてゃん専用ﾀｸﾞ【#いちごてゃん】私の事を呟く際使っていただけたら幸いです 無言フォロー歓迎ですがフォロバは非対応 話しかけてね！","level":19,"last_movie_id":"387092621","is_live":true,"created":1495256697},"tags":["ラジオ"]},{"movie":{"id":"387092618","user_id":"876590475301445632","title":"弾き語り","subtitle":"弾き語り","last_owner_comment":null,"category":"music_recite_girls_jp","link":"http://twitcasting.tv/sag__76","is_live":true,"is_recorded":false,"comment_count":0,"large_thumbnail":"http://202-230-12-93.twitcasting.tv/image3/image.twitcasting.tv/image59_1/8a/90/1712908a-1.jpg","small_thumbnail":"http://202-230-12-93.twitcasting.tv/image3/image.twitcasting.tv/image59_1/8a/90/1712908a-1-s.jpg","country":"jp","duration":9,"created":1500007674,"is_collabo":false,"is_protected":false,"max_view_count":0,"current_view_count":0,"total_view_count":0,"hls_url":"http://twitcasting.tv/sag__76/metastream.m3u8/?video=1"},"broadcaster":{"id":"876590475301445632","screen_id":"sag__76","name":"Sayaka","image":"http://202-234-44-53.moi.st/image3s/pbs.twimg.com/profile_images/878571101680357376/ywH6KzQa_normal.jpg","profile":"ギター弾きながらうたう","level":6,"last_movie_id":"387092618","is_live":true,"created":1499171218},"tags":["はじめて","ラジオ"]},{"movie":{"id":"387092619","user_id":"2258456635","title":"Radio Live #387092619","subtitle":null,"last_owner_comment":"モイ！スタババアがiPhoneから適当にキャス配信中 -","category":null,"link":"http://twitcasting.tv/nandemo_yasan","is_live":true,"is_recorded":false,"comment_count":1,"large_thumbnail":"http://202-230-12-92.twitcasting.tv/image3/image.twitcasting.tv/image57_1/8b/90/1712908b-1.jpg","small_thumbnail":"http://202-230-12-93.twitcasting.tv/image3/image.twitcasting.tv/image57_1/8b/90/1712908b-1-s.jpg","country":"jp","duration":9,"created":1500007674,"is_collabo":false,"is_protected":false,"max_view_count":0,"current_view_count":0,"total_view_count":0,"hls_url":"http://twitcasting.tv/nandemo_yasan/metastream.m3u8/?video=1"},"broadcaster":{"id":"2258456635","screen_id":"nandemo_yasan","name":"MINちゃん♡","image":"http://202-234-44-61.moi.st/image3s/pbs.twimg.com/profile_images/864267278681948160/5eHrZFiM_normal.jpg","profile":"MINMI大チュき♡ 絡みのない人のフォローは、許可しません。娘と小僧のママをしとります。 厄年ようやく終了‼️(∩´∀｀)∩ﾜｰｲ誕生日前日は、大人しく家に引きこもり❤今年は、自分にあった仕事見つける‼️💪","level":29,"last_movie_id":"387092619","is_live":true,"created":1387773376},"tags":["レベル25+","ラジオ"]},{"movie":{"id":"387092617","user_id":"788007525488603136","title":"るいのシャドバマスターへの道","subtitle":"Leo_type_O","last_owner_comment":null,"category":"hobby_game_girls_jp","link":"http://twitcasting.tv/rui_big_bang","is_live":true,"is_recorded":false,"comment_count":0,"large_thumbnail":"http://202-230-12-92.twitcasting.tv/image3/image.twitcasting.tv/image56_1/89/90/17129089-1.jpg","small_thumbnail":"http://202-230-12-91.twitcasting.tv/image3/image.twitcasting.tv/image56_1/89/90/17129089-1-s.jpg","country":"jp","duration":9,"created":1500007674,"is_collabo":false,"is_protected":false,"max_view_count":0,"current_view_count":1,"total_view_count":1,"hls_url":"http://twitcasting.tv/rui_big_bang/metastream.m3u8/?video=1"},"broadcaster":{"id":"788007525488603136","screen_id":"rui_big_bang","name":"るい","image":"http://202-234-44-54.moi.st/image3s/pbs.twimg.com/profile_images/863551367335432192/Eij-hRWP_normal.jpg","profile":"＊るい取り扱い説明書＊暴言や卑猥系が苦手です。可愛いものと甘いものが大好きです。シャドバやってます。マスターになりたいAA帯/しゃどバト→@sbc0025/大好きなリア友→粉たん@UTAsan_kona/アイコンは不信ちゃん→@_fzic/大切な人→てぃーぱ君@ghiuf_hdf","level":31,"last_movie_id":"387092617","is_live":true,"created":1476738210},"tags":["レベル30+","動画"]},{"movie":{"id":"387092613","user_id":"2785727306","title":"Live #387092613","subtitle":null,"last_owner_comment":"モイ！Androidからキャス配信中 -ひまつぶしカラオケ","category":null,"link":"http://twitcasting.tv/houtikuryunan","is_live":true,"is_recorded":false,"comment_count":1,"large_thumbnail":"http://202-230-12-93.twitcasting.tv/image3/image.twitcasting.tv/image59_1/85/90/17129085-1.jpg","small_thumbnail":"http://202-230-12-92.twitcasting.tv/image3/image.twitcasting.tv/image59_1/85/90/17129085-1-s.jpg","country":"jp","duration":12,"created":1500007671,"is_collabo":false,"is_protected":false,"max_view_count":0,"current_view_count":0,"total_view_count":0,"hls_url":"http://twitcasting.tv/houtikuryunan/metastream.m3u8/?video=1"},"broadcaster":{"id":"2785727306","screen_id":"houtikuryunan","name":"地獄の底から舞い戻った鳳龍","image":"http://202-234-44-60.moi.st/image3s/pbs.twimg.com/profile_images/880020429947023361/m37GVfcQ_normal.jpg","profile":"現在は３選手目の青馬を育成中。定期的に引退宣言もする模様","level":24,"last_movie_id":"387092613","is_live":true,"created":1469468907},"tags":["動画"]},{"movie":{"id":"387092614","user_id":"c:docomo19960911","title":"Radio Live #387092614","subtitle":null,"last_owner_comment":"歌枠","category":"music_sing_boys_jp","link":"http://twitcasting.tv/c:docomo19960911","is_live":true,"is_recorded":false,"comment_count":1,"large_thumbnail":"http://202-230-12-91.twitcasting.tv/image3/image.twitcasting.tv/image60_1/86/90/17129086-1.jpg","small_thumbnail":"http://202-230-12-92.twitcasting.tv/image3/image.twitcasting.tv/image60_1/86/90/17129086-1-s.jpg","country":"jp","duration":12,"created":1500007671,"is_collabo":true,"is_protected":false,"max_view_count":0,"current_view_count":0,"total_view_count":0,"hls_url":"http://twitcasting.tv/c:docomo19960911/metastream.m3u8/?video=1"},"broadcaster":{"id":"c:docomo19960911","screen_id":"c:docomo19960911","name":"はせがわーさけー","image":"http://img-twitcasting.s3-us-west-1.amazonaws.com/75/0f/59368197427d3_64.jpg","profile":"","level":15,"last_movie_id":"387092614","is_live":true,"created":1484503511},"tags":["ラジオ"]},{"movie":{"id":"387092612","user_id":"3196357519","title":"ふぇれっとキャス","subtitle":"初見歓迎(=ﾟωﾟ)ﾉ","last_owner_comment":null,"category":"boys_face_jp","link":"http://twitcasting.tv/ferret1006","is_live":true,"is_recorded":false,"comment_count":0,"large_thumbnail":"http://202-230-12-92.twitcasting.tv/image3/image.twitcasting.tv/image56_1/84/90/17129084-1.jpg","small_thumbnail":"http://202-230-12-92.twitcasting.tv/image3/image.twitcasting.tv/image56_1/84/90/17129084-1-s.jpg","country":"jp","duration":13,"created":1500007670,"is_collabo":false,"is_protected":false,"max_view_count":0,"current_view_count":0,"total_view_count":0,"hls_url":"http://twitcasting.tv/ferret1006/metastream.m3u8/?video=1"},"broadcaster":{"id":"3196357519","screen_id":"ferret1006","name":"イタチ🐾","image":"http://202-234-44-53.moi.st/image3s/pbs.twimg.com/profile_images/868077368350392320/w9TdJoN9_normal.jpg","profile":"フェレット垢 トラックドライバー 韓国ハーフ スノボ カメラ 1人暮らし アラサー ツイキャスONE OK ROCK スプラトゥーン２ ２にょろ@ マーシャル♂セーブル【ぽん太】17.03.30 .パスバレー♀セーブル【ふう子】17.02.25 ．","level":19,"last_movie_id":"387092612","is_live":true,"created":1431695499},"tags":["動画","過疎"]}]}
    """;
    final MovieResponseList movieResponseList = serializers
        .deserializeWith(MovieResponseList.serializer, JSON.decode(json));

    print(movieResponseList);
  });
}
