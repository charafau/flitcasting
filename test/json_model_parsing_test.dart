import 'package:built_collection/built_collection.dart';
import 'package:test/test.dart';
import 'package:flitcasting/serializers.dart';
import 'dart:convert';
import 'package:flitcasting/model/movie.dart';
import 'package:flitcasting/model/broadcaster.dart';
import 'package:flitcasting/model/accesstoken.dart';
import 'package:flitcasting/model/movie_response.dart';
import 'package:flitcasting/model/movie_response_list.dart';

void main() {

  test('should deserialize movie', () {
    final String _movieJson = """
   {"id":"387092623","user_id":"2543157289","title":"sometitleï¼ï¼ï¼","subtitle":"blablaï¼ï¼ï¼","last_owner_comment":null,"category":"cat","link":"http://ada.com","is_live":true,"is_recorded":false,"comment_count":0,"large_thumbnail":"http://sometdsa.com/asda.jpg","small_thumbnail":"http://sometdsa.com/asda.jpg","country":"jp","duration":8,"created":1500007675,"is_collabo":false,"is_protected":false,"max_view_count":0,"current_view_count":1,"total_view_count":1,"hls_url":"http://adad.com/metastream.m3u8/?video=1"}
  """;

    final movie = serializers.deserializeWith(
        Movie.serializer, JSON.decode(_movieJson));
    print(movie);
  });

  test('should deserialize broadcaster', () {
    final String json = """
    {"id":"2543157289","screen_id":"leeeaf_","name":"ã‚Šãƒãµ","image":"http://202-234-23-158.moi.st/image3s/pbs.twimg.com/profile_images/876751099482447872/X5d_6Imz_normal.jpg","profile":"ç›®æŒ‡ã›ã‚¢ã‚¤ãƒ‰ãƒ«é…ä¿¡è€…","level":27,"last_movie_id":"387092623","is_live":true,"created":1432392721}
    """;

    final broadcaser = serializers.deserializeWith(
        Broadcaster.serializer, JSON.decode(json));

    print(broadcaser);
  });

  test('should deserialize movie response', () {
    final String json = """
      {"movie":{"id":"387092623","user_id":"2543157289","title":"åˆè¦‹ã•ã¾ã•ã¾ï¼ï¼ï¼","subtitle":"åˆè¦‹ã•ã¾ã•ã¾ï¼ï¼ï¼","last_owner_comment":null,"category":"boys_healingvoice_jp","link":"http://twitcasting.tv/leeeaf_","is_live":true,"is_recorded":false,"comment_count":0,"large_thumbnail":"http://202-230-12-93.twitcasting.tv/image3/image.twitcasting.tv/image60_1/8f/90/1712908f-1.jpg","small_thumbnail":"http://202-230-12-92.twitcasting.tv/image3/image.twitcasting.tv/image60_1/8f/90/1712908f-1-s.jpg","country":"jp","duration":8,"created":1500007675,"is_collabo":false,"is_protected":false,"max_view_count":0,"current_view_count":1,"total_view_count":1,"hls_url":"http://twitcasting.tv/leeeaf_/metastream.m3u8/?video=1"},"broadcaster":{"id":"2543157289","screen_id":"leeeaf_","name":"ã‚Šãƒãµ","image":"http://202-234-23-158.moi.st/image3s/pbs.twimg.com/profile_images/876751099482447872/X5d_6Imz_normal.jpg","profile":"ç›®æŒ‡ã›ã‚¢ã‚¤ãƒ‰ãƒ«é…ä¿¡è€…","level":27,"last_movie_id":"387092623","is_live":true,"created":1432392721}}
    """;

    final movieResponse = serializers.deserializeWith(
        MovieResponse.serializer, JSON.decode(json));

    print(movieResponse);
  });

  test('should deserialize movie response list', () {
    final String json = r"""
    {"movies":[{"movie":{"id":"387092623","user_id":"2543157289","title":"åˆè¦‹ã•ã¾ã•ã¾ï¼ï¼ï¼","subtitle":"åˆè¦‹ã•ã¾ã•ã¾ï¼ï¼ï¼","last_owner_comment":null,"category":"boys_healingvoice_jp","link":"http://twitcasting.tv/leeeaf_","is_live":true,"is_recorded":false,"comment_count":0,"large_thumbnail":"http://202-230-12-93.twitcasting.tv/image3/image.twitcasting.tv/image60_1/8f/90/1712908f-1.jpg","small_thumbnail":"http://202-230-12-92.twitcasting.tv/image3/image.twitcasting.tv/image60_1/8f/90/1712908f-1-s.jpg","country":"jp","duration":8,"created":1500007675,"is_collabo":false,"is_protected":false,"max_view_count":0,"current_view_count":1,"total_view_count":1,"hls_url":"http://twitcasting.tv/leeeaf_/metastream.m3u8/?video=1"},"broadcaster":{"id":"2543157289","screen_id":"leeeaf_","name":"ã‚Šãƒãµ","image":"http://202-234-23-158.moi.st/image3s/pbs.twimg.com/profile_images/876751099482447872/X5d_6Imz_normal.jpg","profile":"ç›®æŒ‡ã›ã‚¢ã‚¤ãƒ‰ãƒ«é…ä¿¡è€…","level":27,"last_movie_id":"387092623","is_live":true,"created":1432392721},"tags":["ãƒ¬ãƒ™ãƒ«25+","ãƒ©ã‚¸ã‚ª"]},{"movie":{"id":"387092620","user_id":"843173810941571072","title":"ğŸ“åˆè¦‹ã•ã‚“å¤§æ­“è¿ğŸ“","subtitle":"ğŸ“åˆè¦‹ã•ã‚“å¤§æ­“è¿ğŸ“","last_owner_comment":null,"category":"girls_all_jp","link":"http://twitcasting.tv/mame_5230_","is_live":true,"is_recorded":false,"comment_count":0,"large_thumbnail":"http://202-230-12-91.twitcasting.tv/image3/image.twitcasting.tv/image59_1/8c/90/1712908c-1.jpg","small_thumbnail":"http://202-230-12-91.twitcasting.tv/image3/image.twitcasting.tv/image59_1/8c/90/1712908c-1-s.jpg","country":"jp","duration":8,"created":1500007675,"is_collabo":true,"is_protected":false,"max_view_count":0,"current_view_count":0,"total_view_count":0,"hls_url":"http://twitcasting.tv/mame_5230_/metastream.m3u8/?video=1"},"broadcaster":{"id":"843173810941571072","screen_id":"mame_5230_","name":"ğŸ“ãƒãƒ¡ ğŸ“","image":"http://202-234-44-54.moi.st/image3s/pbs.twimg.com/profile_images/873355214979452928/VYeuD1f1_normal.jpg","profile":"ï½¶ï¾Œï¾Ÿï¾˜ï½ºã§å‡ºæ¥ã¦ã„ã‚‹äººé–“ã§ã™ã€‚ã©ã†ã‹è‡ªç™ºã—ã¦ãã ï½»ï½²ã€‚150cmãƒãƒ“ å¤§å¥½ããª å¼Ÿ å› â†’ã€Œ@tuki_noko525ã€â™¡ å¦¹ï¾ï½¬ï¾â†’(@h1_rg_ura_4)â™¡","level":20,"last_movie_id":"387092620","is_live":true,"created":1495631968},"tags":["ãƒ©ã‚¸ã‚ª"]},{"movie":{"id":"387092622","user_id":"870794422807547904","title":"Radio Live #387092622","subtitle":null,"last_owner_comment":"ãƒ¢ã‚¤ï¼Androidã‹ã‚‰ã‚­ãƒ£ã‚¹é…ä¿¡ä¸­ -","category":null,"link":"http://twitcasting.tv/umi_d_217","is_live":true,"is_recorded":false,"comment_count":1,"large_thumbnail":"http://202-230-12-92.twitcasting.tv/image3/image.twitcasting.tv/image56_1/8e/90/1712908e-1.jpg","small_thumbnail":"http://202-230-12-93.twitcasting.tv/image3/image.twitcasting.tv/image56_1/8e/90/1712908e-1-s.jpg","country":"jp","duration":8,"created":1500007675,"is_collabo":false,"is_protected":false,"max_view_count":0,"current_view_count":0,"total_view_count":0,"hls_url":"http://twitcasting.tv/umi_d_217/metastream.m3u8/?video=1"},"broadcaster":{"id":"870794422807547904","screen_id":"umi_d_217","name":"ã†ã¿","image":"http://202-234-23-158.moi.st/image3s/pbs.twimg.com/profile_images/885050152909668352/CwjtCzj__normal.jpg","profile":"LG'B'T/é è·é›¢\n#ã‚»ã‚¯ãƒã‚¤#LGBT","level":1,"last_movie_id":"387092622","is_live":true,"created":1499521167},"tags":["ã¯ã˜ã‚ã¦","ãƒ©ã‚¸ã‚ª"]},{"movie":{"id":"387092621","user_id":"864036951187275776","title":"ã„ã¡ã”ã¦ã‚ƒã‚“","subtitle":"ãŠè²·ã„ç‰©çµ‚ã‚ã£ãŸï¼","last_owner_comment":"åˆè¦‹ã•ã‚“å¤§æ­“è¿ èª°ã§ã‚‚ã‚³ãƒ¡ã—ã¦ãã ã•ã„ï¼","category":"girls_talk_jp","link":"http://twitcasting.tv/berry____ir","is_live":true,"is_recorded":false,"comment_count":1,"large_thumbnail":"http://202-230-12-93.twitcasting.tv/image3/image.twitcasting.tv/image56_1/8d/90/1712908d-1.jpg","small_thumbnail":"http://202-230-12-91.twitcasting.tv/image3/image.twitcasting.tv/image56_1/8d/90/1712908d-1-s.jpg","country":"jp","duration":8,"created":1500007675,"is_collabo":false,"is_protected":false,"max_view_count":0,"current_view_count":2,"total_view_count":2,"hls_url":"http://twitcasting.tv/berry____ir/metastream.m3u8/?video=1"},"broadcaster":{"id":"864036951187275776","screen_id":"berry____ir","name":"ã„ã¡ã”ã¦ã‚ƒã‚“","image":"http://202-234-23-159.moi.st/image3s/pbs.twimg.com/profile_images/871430230824460288/CvPWAQUU_normal.jpg","profile":"ã„ã¡ã”ã¦ã‚ƒã‚“ã§ã™ å¥³ã®å­å¤§å¥½ããƒãƒ³ ä¸€å¿œLå¯„ã‚Šã®B(æœ€è¿‘ã‚ã‚„ãµã‚„) ï¾Œï½ªï¾‘ï¾˜ï¾Šï¾(å°‘ã—ãƒã‚³å¯„ã‚Š) Twitterå®¶æ—ãŒæ²¢å±± ã‚ã¿ã‚…ã€#çŠ¬è‹ºçµ„ã€‘ã„ã¡ã”ã¦ã‚ƒã‚“å°‚ç”¨ï¾€ï½¸ï¾ã€#ã„ã¡ã”ã¦ã‚ƒã‚“ã€‘ç§ã®äº‹ã‚’å‘Ÿãéš›ä½¿ã£ã¦ã„ãŸã ã‘ãŸã‚‰å¹¸ã„ã§ã™ ç„¡è¨€ãƒ•ã‚©ãƒ­ãƒ¼æ­“è¿ã§ã™ãŒãƒ•ã‚©ãƒ­ãƒã¯éå¯¾å¿œ è©±ã—ã‹ã‘ã¦ã­ï¼","level":19,"last_movie_id":"387092621","is_live":true,"created":1495256697},"tags":["ãƒ©ã‚¸ã‚ª"]},{"movie":{"id":"387092618","user_id":"876590475301445632","title":"å¼¾ãèªã‚Š","subtitle":"å¼¾ãèªã‚Š","last_owner_comment":null,"category":"music_recite_girls_jp","link":"http://twitcasting.tv/sag__76","is_live":true,"is_recorded":false,"comment_count":0,"large_thumbnail":"http://202-230-12-93.twitcasting.tv/image3/image.twitcasting.tv/image59_1/8a/90/1712908a-1.jpg","small_thumbnail":"http://202-230-12-93.twitcasting.tv/image3/image.twitcasting.tv/image59_1/8a/90/1712908a-1-s.jpg","country":"jp","duration":9,"created":1500007674,"is_collabo":false,"is_protected":false,"max_view_count":0,"current_view_count":0,"total_view_count":0,"hls_url":"http://twitcasting.tv/sag__76/metastream.m3u8/?video=1"},"broadcaster":{"id":"876590475301445632","screen_id":"sag__76","name":"Sayaka","image":"http://202-234-44-53.moi.st/image3s/pbs.twimg.com/profile_images/878571101680357376/ywH6KzQa_normal.jpg","profile":"ã‚®ã‚¿ãƒ¼å¼¾ããªãŒã‚‰ã†ãŸã†","level":6,"last_movie_id":"387092618","is_live":true,"created":1499171218},"tags":["ã¯ã˜ã‚ã¦","ãƒ©ã‚¸ã‚ª"]},{"movie":{"id":"387092619","user_id":"2258456635","title":"Radio Live #387092619","subtitle":null,"last_owner_comment":"ãƒ¢ã‚¤ï¼ã‚¹ã‚¿ãƒãƒã‚¢ãŒiPhoneã‹ã‚‰é©å½“ã«ã‚­ãƒ£ã‚¹é…ä¿¡ä¸­ -","category":null,"link":"http://twitcasting.tv/nandemo_yasan","is_live":true,"is_recorded":false,"comment_count":1,"large_thumbnail":"http://202-230-12-92.twitcasting.tv/image3/image.twitcasting.tv/image57_1/8b/90/1712908b-1.jpg","small_thumbnail":"http://202-230-12-93.twitcasting.tv/image3/image.twitcasting.tv/image57_1/8b/90/1712908b-1-s.jpg","country":"jp","duration":9,"created":1500007674,"is_collabo":false,"is_protected":false,"max_view_count":0,"current_view_count":0,"total_view_count":0,"hls_url":"http://twitcasting.tv/nandemo_yasan/metastream.m3u8/?video=1"},"broadcaster":{"id":"2258456635","screen_id":"nandemo_yasan","name":"MINã¡ã‚ƒã‚“â™¡","image":"http://202-234-44-61.moi.st/image3s/pbs.twimg.com/profile_images/864267278681948160/5eHrZFiM_normal.jpg","profile":"MINMIå¤§ãƒãƒ¥ãâ™¡ çµ¡ã¿ã®ãªã„äººã®ãƒ•ã‚©ãƒ­ãƒ¼ã¯ã€è¨±å¯ã—ã¾ã›ã‚“ã€‚å¨˜ã¨å°åƒ§ã®ãƒãƒã‚’ã—ã¨ã‚Šã¾ã™ã€‚ å„å¹´ã‚ˆã†ã‚„ãçµ‚äº†â€¼ï¸(âˆ©Â´âˆ€ï½€)âˆ©ï¾œï½°ï½²èª•ç”Ÿæ—¥å‰æ—¥ã¯ã€å¤§äººã—ãå®¶ã«å¼•ãã“ã‚‚ã‚Šâ¤ä»Šå¹´ã¯ã€è‡ªåˆ†ã«ã‚ã£ãŸä»•äº‹è¦‹ã¤ã‘ã‚‹â€¼ï¸ğŸ’ª","level":29,"last_movie_id":"387092619","is_live":true,"created":1387773376},"tags":["ãƒ¬ãƒ™ãƒ«25+","ãƒ©ã‚¸ã‚ª"]},{"movie":{"id":"387092617","user_id":"788007525488603136","title":"ã‚‹ã„ã®ã‚·ãƒ£ãƒ‰ãƒãƒã‚¹ã‚¿ãƒ¼ã¸ã®é“","subtitle":"Leo_type_O","last_owner_comment":null,"category":"hobby_game_girls_jp","link":"http://twitcasting.tv/rui_big_bang","is_live":true,"is_recorded":false,"comment_count":0,"large_thumbnail":"http://202-230-12-92.twitcasting.tv/image3/image.twitcasting.tv/image56_1/89/90/17129089-1.jpg","small_thumbnail":"http://202-230-12-91.twitcasting.tv/image3/image.twitcasting.tv/image56_1/89/90/17129089-1-s.jpg","country":"jp","duration":9,"created":1500007674,"is_collabo":false,"is_protected":false,"max_view_count":0,"current_view_count":1,"total_view_count":1,"hls_url":"http://twitcasting.tv/rui_big_bang/metastream.m3u8/?video=1"},"broadcaster":{"id":"788007525488603136","screen_id":"rui_big_bang","name":"ã‚‹ã„","image":"http://202-234-44-54.moi.st/image3s/pbs.twimg.com/profile_images/863551367335432192/Eij-hRWP_normal.jpg","profile":"ï¼Šã‚‹ã„å–ã‚Šæ‰±ã„èª¬æ˜æ›¸ï¼Šæš´è¨€ã‚„å‘çŒ¥ç³»ãŒè‹¦æ‰‹ã§ã™ã€‚å¯æ„›ã„ã‚‚ã®ã¨ç”˜ã„ã‚‚ã®ãŒå¤§å¥½ãã§ã™ã€‚ã‚·ãƒ£ãƒ‰ãƒã‚„ã£ã¦ã¾ã™ã€‚ãƒã‚¹ã‚¿ãƒ¼ã«ãªã‚ŠãŸã„AAå¸¯/ã—ã‚ƒã©ãƒãƒˆâ†’@sbc0025/å¤§å¥½ããªãƒªã‚¢å‹â†’ç²‰ãŸã‚“@UTAsan_kona/ã‚¢ã‚¤ã‚³ãƒ³ã¯ä¸ä¿¡ã¡ã‚ƒã‚“â†’@_fzic/å¤§åˆ‡ãªäººâ†’ã¦ãƒãƒ¼ã±å›@ghiuf_hdf","level":31,"last_movie_id":"387092617","is_live":true,"created":1476738210},"tags":["ãƒ¬ãƒ™ãƒ«30+","å‹•ç”»"]},{"movie":{"id":"387092613","user_id":"2785727306","title":"Live #387092613","subtitle":null,"last_owner_comment":"ãƒ¢ã‚¤ï¼Androidã‹ã‚‰ã‚­ãƒ£ã‚¹é…ä¿¡ä¸­ -ã²ã¾ã¤ã¶ã—ã‚«ãƒ©ã‚ªã‚±","category":null,"link":"http://twitcasting.tv/houtikuryunan","is_live":true,"is_recorded":false,"comment_count":1,"large_thumbnail":"http://202-230-12-93.twitcasting.tv/image3/image.twitcasting.tv/image59_1/85/90/17129085-1.jpg","small_thumbnail":"http://202-230-12-92.twitcasting.tv/image3/image.twitcasting.tv/image59_1/85/90/17129085-1-s.jpg","country":"jp","duration":12,"created":1500007671,"is_collabo":false,"is_protected":false,"max_view_count":0,"current_view_count":0,"total_view_count":0,"hls_url":"http://twitcasting.tv/houtikuryunan/metastream.m3u8/?video=1"},"broadcaster":{"id":"2785727306","screen_id":"houtikuryunan","name":"åœ°ç„ã®åº•ã‹ã‚‰èˆã„æˆ»ã£ãŸé³³é¾","image":"http://202-234-44-60.moi.st/image3s/pbs.twimg.com/profile_images/880020429947023361/m37GVfcQ_normal.jpg","profile":"ç¾åœ¨ã¯ï¼“é¸æ‰‹ç›®ã®é’é¦¬ã‚’è‚²æˆä¸­ã€‚å®šæœŸçš„ã«å¼•é€€å®£è¨€ã‚‚ã™ã‚‹æ¨¡æ§˜","level":24,"last_movie_id":"387092613","is_live":true,"created":1469468907},"tags":["å‹•ç”»"]},{"movie":{"id":"387092614","user_id":"c:docomo19960911","title":"Radio Live #387092614","subtitle":null,"last_owner_comment":"æ­Œæ ","category":"music_sing_boys_jp","link":"http://twitcasting.tv/c:docomo19960911","is_live":true,"is_recorded":false,"comment_count":1,"large_thumbnail":"http://202-230-12-91.twitcasting.tv/image3/image.twitcasting.tv/image60_1/86/90/17129086-1.jpg","small_thumbnail":"http://202-230-12-92.twitcasting.tv/image3/image.twitcasting.tv/image60_1/86/90/17129086-1-s.jpg","country":"jp","duration":12,"created":1500007671,"is_collabo":true,"is_protected":false,"max_view_count":0,"current_view_count":0,"total_view_count":0,"hls_url":"http://twitcasting.tv/c:docomo19960911/metastream.m3u8/?video=1"},"broadcaster":{"id":"c:docomo19960911","screen_id":"c:docomo19960911","name":"ã¯ã›ãŒã‚ãƒ¼ã•ã‘ãƒ¼","image":"http://img-twitcasting.s3-us-west-1.amazonaws.com/75/0f/59368197427d3_64.jpg","profile":"","level":15,"last_movie_id":"387092614","is_live":true,"created":1484503511},"tags":["ãƒ©ã‚¸ã‚ª"]},{"movie":{"id":"387092612","user_id":"3196357519","title":"ãµã‡ã‚Œã£ã¨ã‚­ãƒ£ã‚¹","subtitle":"åˆè¦‹æ­“è¿(=ï¾ŸÏ‰ï¾Ÿ)ï¾‰","last_owner_comment":null,"category":"boys_face_jp","link":"http://twitcasting.tv/ferret1006","is_live":true,"is_recorded":false,"comment_count":0,"large_thumbnail":"http://202-230-12-92.twitcasting.tv/image3/image.twitcasting.tv/image56_1/84/90/17129084-1.jpg","small_thumbnail":"http://202-230-12-92.twitcasting.tv/image3/image.twitcasting.tv/image56_1/84/90/17129084-1-s.jpg","country":"jp","duration":13,"created":1500007670,"is_collabo":false,"is_protected":false,"max_view_count":0,"current_view_count":0,"total_view_count":0,"hls_url":"http://twitcasting.tv/ferret1006/metastream.m3u8/?video=1"},"broadcaster":{"id":"3196357519","screen_id":"ferret1006","name":"ã‚¤ã‚¿ãƒğŸ¾","image":"http://202-234-44-53.moi.st/image3s/pbs.twimg.com/profile_images/868077368350392320/w9TdJoN9_normal.jpg","profile":"ãƒ•ã‚§ãƒ¬ãƒƒãƒˆå¢ ãƒˆãƒ©ãƒƒã‚¯ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ éŸ“å›½ãƒãƒ¼ãƒ• ã‚¹ãƒãƒœ ã‚«ãƒ¡ãƒ© 1äººæš®ã‚‰ã— ã‚¢ãƒ©ã‚µãƒ¼ ãƒ„ã‚¤ã‚­ãƒ£ã‚¹ONE OK ROCK ã‚¹ãƒ—ãƒ©ãƒˆã‚¥ãƒ¼ãƒ³ï¼’ ï¼’ã«ã‚‡ã‚@ ãƒãƒ¼ã‚·ãƒ£ãƒ«â™‚ã‚»ãƒ¼ãƒ–ãƒ«ã€ã½ã‚“å¤ªã€‘17.03.30 .ãƒ‘ã‚¹ãƒãƒ¬ãƒ¼â™€ã‚»ãƒ¼ãƒ–ãƒ«ã€ãµã†å­ã€‘17.02.25 ï¼","level":19,"last_movie_id":"387092612","is_live":true,"created":1431695499},"tags":["å‹•ç”»","éç–"]}]}
    """;
    final MovieResponseList movieResponseList = serializers
        .deserializeWith(MovieResponseList.serializer, JSON.decode(json));

    print(movieResponseList);
  });
}
